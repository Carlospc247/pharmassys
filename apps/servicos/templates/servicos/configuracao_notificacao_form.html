{% extends 'base.html' %}
{% block title %}Configuração de Notificações{% endblock %}
{% block page_title %}Configuração de Notificações{% endblock %}

{% block content %}
<div class="overflow-hidden rounded-lg bg-white shadow-sm dark:bg-gray-800 p-6">
    <form method="post">{% csrf_token %}
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">

            <!-- Dias de antecedência -->
            <div class="col-span-1 sm:col-span-2">
                <label for="dias_notificacao" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
                    Dias de Antecedência
                </label>
                <input type="text" name="dias_notificacao" id="dias_notificacao" 
                       value="{{ form.dias_notificacao.value|default_if_none:'' }}"
                       placeholder="Ex: 15,7,3,1"
                       class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm">
                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                    Separe os dias por vírgula (ex: 15,7,3,1)
                </p>
            </div>

            <!-- Horário de envio -->
            <div>
                <label for="horario_inicio_envio" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Horário Início</label>
                <input type="time" name="horario_inicio_envio" id="horario_inicio_envio"
                       value="{{ form.horario_inicio_envio.value|default_if_none:'08:00' }}"
                       class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm">
            </div>
            <div>
                <label for="horario_fim_envio" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Horário Fim</label>
                <input type="time" name="horario_fim_envio" id="horario_fim_envio"
                       value="{{ form.horario_fim_envio.value|default_if_none:'18:00' }}"
                       class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm">
            </div>

            <!-- Ativar notificações -->
            <div class="flex items-center space-x-4 mt-4 sm:col-span-2">
                <label class="inline-flex items-center">
                    <input type="checkbox" name="email_ativo" value="1" {% if form.email_ativo.value %}checked{% endif %} class="rounded border-gray-300 text-blue-600 shadow-sm focus:ring-blue-500">
                    <span class="ml-2 text-gray-700 dark:text-gray-300">Email Ativo</span>
                </label>
                <label class="inline-flex items-center">
                    <input type="checkbox" name="sms_ativo" value="1" {% if form.sms_ativo.value %}checked{% endif %} class="rounded border-gray-300 text-blue-600 shadow-sm focus:ring-blue-500">
                    <span class="ml-2 text-gray-700 dark:text-gray-300">SMS Ativo</span>
                </label>
                <label class="inline-flex items-center">
                    <input type="checkbox" name="whatsapp_ativo" value="1" {% if form.whatsapp_ativo.value %}checked{% endif %} class="rounded border-gray-300 text-blue-600 shadow-sm focus:ring-blue-500">
                    <span class="ml-2 text-gray-700 dark:text-gray-300">WhatsApp Ativo</span>
                </label>
            </div>

            <!-- Templates de Mensagem -->
            <div class="col-span-1 sm:col-span-2">
                <label for="template_email_titulo" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
                    Template de Email - Título
                </label>
                <input type="text" name="template_email_titulo" id="template_email_titulo"
                       value="{{ form.template_email_titulo.value }}"
                       class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm">
            </div>
            <div class="col-span-1 sm:col-span-2">
                <label for="template_email_mensagem" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
                    Template de Email - Mensagem
                </label>
                <textarea name="template_email_mensagem" id="template_email_mensagem" rows="6"
                          class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm">{{ form.template_email_mensagem.value }}</textarea>
            </div>
            <div class="col-span-1 sm:col-span-2">
                <label for="template_sms_mensagem" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
                    Template SMS
                </label>
                <textarea name="template_sms_mensagem" id="template_sms_mensagem" rows="3"
                          class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm">{{ form.template_sms_mensagem.value }}</textarea>
            </div>

            <!-- Configurações avançadas -->
            <div class="col-span-1 sm:col-span-2 grid grid-cols-2 gap-4 mt-4">
                <div>
                    <label for="max_tentativas_envio" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Máx. Tentativas</label>
                    <input type="number" name="max_tentativas_envio" id="max_tentativas_envio" min="1" value="{{ form.max_tentativas_envio.value|default_if_none:3 }}"
                           class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm">
                </div>
                <div>
                    <label for="intervalo_tentativas_horas" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Intervalo Entre Tentativas (h)</label>
                    <input type="number" name="intervalo_tentativas_horas" id="intervalo_tentativas_horas" min="1" value="{{ form.intervalo_tentativas_horas.value|default_if_none:2 }}"
                           class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm">
                </div>
            </div>

        </div>

        <div class="mt-6 flex space-x-4">
            <button type="submit" class="inline-flex items-center rounded-md bg-blue-600 px-4 py-2 text-white hover:bg-blue-500">
                Salvar Configuração
            </button>
            <a href="{% url 'notificacoes:notificacao_list' %}" class="ml-2 text-gray-600 hover:underline">Cancelar</a>
        </div>
    </form>
</div>
{% endblock %}
