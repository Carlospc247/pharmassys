<!-- templates/emails/relatorio_erro.html -->
{% extends "emails/base.html" %}

{% block title %}Erro na Gera√ß√£o de Relat√≥rio - {{ relatorio.nome_relatorio }}{% endblock %}

{% block header_subtitle %}Ocorreu um erro durante o processamento{% endblock %}

{% block content %}
<h2>Erro na Gera√ß√£o do Relat√≥rio ‚ö†Ô∏è</h2>

<p>Ol√°, {{ relatorio.usuario.get_full_name|default:relatorio.usuario.username }}!</p>

<p>Infelizmente, ocorreu um erro durante a gera√ß√£o do relat√≥rio "<strong>{{ relatorio.nome_relatorio }}</strong>".</p>

<div class="alert alert-danger">
    <strong>Status:</strong> Erro<br>
    <strong>Data/Hora:</strong> {{ relatorio.data_execucao|date:"d/m/Y H:i" }}<br>
    <strong>ID do erro:</strong> {{ relatorio.id }}
</div>

<h3>O que aconteceu?</h3>

<p>{{ relatorio.mensagem_erro|default:"Erro n√£o especificado. Nossa equipe t√©cnica foi notificada automaticamente." }}</p>

<h3>O que voc√™ pode fazer?</h3>

<div style="margin: 16px 0;">
    <p><strong>1. Tentar novamente:</strong> Muitas vezes o erro √© tempor√°rio.</p>
    <div style="text-align: center; margin: 16px 0;">
        <a href="{{ retry_url }}" class="btn btn-primary" style="text-decoration: none;">
            üîÑ Tentar Novamente
        </a>
    </div>
    
    <p><strong>2. Verificar os filtros:</strong> Certifique-se de que os filtros aplicados s√£o v√°lidos.</p>
    
    <p><strong>3. Contatar o suporte:</strong> Se o problema persistir, nossa equipe pode ajudar.</p>
    <div style="text-align: center; margin: 16px 0;">
        <a href="{{ support_url }}" class="btn btn-secondary" style="text-decoration: none;">
            üí¨ Contatar Suporte
        </a>
    </div>
</div>

<h3>Detalhes do Relat√≥rio</h3>

<table class="table">
    <tr>
        <td><strong>Template:</strong></td>
        <td>{{ relatorio.template.nome }}</td>
    </tr>
    <tr>
        <td><strong>Data de solicita√ß√£o:</strong></td>
        <td>{{ relatorio.data_solicitacao|date:"d/m/Y H:i" }}</td>
    </tr>
    <tr>
        <td><strong>Formato solicitado:</strong></td>
        <td>{{ relatorio.formato|upper }}</td>
    </tr>
    {% if relatorio.filtros_aplicados %}
    <tr>
        <td><strong>Filtros aplicados:</strong></td>
        <td>{{ relatorio.filtros_aplicados }}</td>
    </tr>
    {% endif %}
</table>

<div class="alert alert-info">
    <strong>Nossa equipe foi notificada:</strong> Os desenvolvedores j√° est√£o cientes do problema e trabalham para corrigi-lo. 
    Voc√™ ser√° notificado quando uma corre√ß√£o estiver dispon√≠vel.
</div>

<p>Pedimos desculpas pelo inconveniente e agradecemos sua compreens√£o.</p>

<p>
    Atenciosamente,<br>
    <strong>Equipe do Sistema de Relat√≥rios</strong>
</p>
{% endblock %}

{% block unsubscribe_url %}{{ base_url }}/configuracoes/?tab=notificacoes{% endblock %}
