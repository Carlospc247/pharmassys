{% extends 'admin/base_site.html' %}

{% block title %}Gerar Licença{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>Gerar Nova Licença</h2>

    {% if messages %}
        <div class="alert alert-info">
            {% for message in messages %}
                <p>{{ message }}</p>
            {% endfor %}
        </div>
    {% endif %}

    <form method="post">
        {% csrf_token %}
        <div class="form-group">
            <label for="empresa_id">Selecione a Empresa:</label>
            <select name="empresa_id" id="empresa_id" class="form-control" required>
                <option value="">-- Selecione --</option>
                {% for empresa in empresas %}
                    <option value="{{ empresa.id }}">{{ empresa.nome }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="plano_id">Selecione o Plano:</label>
            <select name="plano_id" id="plano_id" class="form-control" required>
                <option value="">-- Selecione --</option>
                {% for plano in planos %}
                    <option value="{{ plano.id }}">{{ plano.nome }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="meses">Meses de Licença:</label>
            <input type="number" name="meses" id="meses" class="form-control" value="1" min="1" required>
        </div>

        <button type="submit" class="btn btn-primary">Gerar Licença</button>
        <a href="{% url 'admin:licenciamento_licenca_changelist' %}" class="btn btn-secondary">Cancelar</a>
    </form>
</div>
{% endblock %}