{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between mb-3">
    <h3>Impostos e Tributos</h3>
    <a href="{% url 'tributacao:imposto_create' %}" class="btn btn-primary">Novo Imposto</a>
  </div>

  {% if impostos %}
  <table class="table table-striped table-hover align-middle">
    <thead>
      <tr>
        <th>Código AGT</th>
        <th>Nome</th>
        <th>Período</th>
        <th>Valor Devido (AOA)</th>
        <th>Situação</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      {% for imposto in impostos %}
      <tr>
        <td>{{ imposto.codigo_receita_agt }}</td>
        <td>{{ imposto.nome }}</td>
        <td>{{ imposto.mes_referencia }}/{{ imposto.ano_referencia }}</td>
        <td>{{ imposto.valor_devido|floatformat:2 }}</td>
        <td>
          <span class="badge 
            {% if imposto.situacao == 'pago' %}bg-success
            {% elif imposto.situacao == 'vencido' %}bg-danger
            {% else %}bg-secondary{% endif %}">
            {{ imposto.get_situacao_display }}
          </span>
        </td>
        <td>
          <a href="{% url 'tributacao:imposto_detail' imposto.pk %}" class="btn btn-sm btn-outline-info">Ver</a>
          <a href="{% url 'tributacao:imposto_update' imposto.pk %}" class="btn btn-sm btn-outline-warning">Editar</a>
          <a href="{% url 'tributacao:imposto_delete' imposto.pk %}" class="btn btn-sm btn-outline-danger">Excluir</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <div class="alert alert-info">Nenhum imposto cadastrado.</div>
  {% endif %}
</div>
{% endblock %}
